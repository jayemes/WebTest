(this["webpackJsonpspiro-react"]=this["webpackJsonpspiro-react"]||[]).push([[0],{21:function(e,t,n){e.exports=n.p+"static/media/help-24px.bca12a0f.svg"},23:function(e,t,n){e.exports=n(38)},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),i=n.n(o),c=(n(28),n(4)),u=n(5),s=n(8),l=n(9),d=n(7),h=n(6),p=(n(29),n(10)),m=n(1),f=(n(30),n(16)),v=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).myRef=r.a.createRef(),e.canvas=null,e.myScene=null,e}return Object(s.a)(n,[{key:"createCanvas",value:function(){var e=new m.r;e.setSize(500,500,!1),this.canvas=e.domElement,this.canvas.id="3DC";var t=new m.l,n=new m.j(75,1,.1,1e3);n.position.set(70,70,70),n.lookAt(0,0,0);var a=new f.a(n,e.domElement);return t.add(this.createGeometry(this.generatePoints())),e.render(t,n),function r(){requestAnimationFrame(r),a.update(),e.render(t,n)}(),t}},{key:"generatePointsOG",value:function(){for(var e=[],t=this.props.r1,n=this.props.r2,a=this.props.k0,r=this.props.k1,o=this.props.k2,i=this.props.nops||2e3,c=0;c<=.02*i;c+=.02){var u=t*Math.sin(a*c)*Math.cos(r*c),s=t*Math.sin(a*c)*Math.sin(r*c),l=t*Math.cos(a*c)+c,d=u+n*Math.sin(o*c)*Math.cos(o*c),h=s+n*Math.sin(o*c)*Math.sin(o*c),p=l+n*Math.cos(o*c);e.push(new m.q(d,h,p))}return e}},{key:"generatePointsByNodes",value:function(){var e=[],t=this.props.output;if(!t)return[];for(var n=this.props.nops||2e3,a=Number.parseFloat(this.props.delta),r=0*a;r<=n*a;r+=a){var o=t.x(r),i=t.y(r),c=t.z(r);e.push(new m.q(o,i,c))}return e}},{key:"generatePoints",value:function(){return this.generatePointsByNodes()}},{key:"createGeometry",value:function(e){return this.createLineGeometry(e)}},{key:"createLineGeometry",value:function(e){var t=new m.i;t.name="Lines";var n=this.createPositionalMaterial(e),a=(new m.a).setFromPoints(e),r=new m.d(a,n);return t.add(r),t}},{key:"createCubesGeometry",value:function(e){var t=new m.i;t.name="Lines";for(var n=e.length,a=new m.c(1),r=0;r<n-1;r+=5){var o=new m.h({});o.color.setHSL(r/n,1,.5);var i=new m.g(a,o);i.position.set(e[r].x+Math.random(),e[r].y,e[r].z),t.add(i)}return t}},{key:"createPositionalMaterial",value:function(e){if(e.length>0){var t=1e-4,n=Math.max.apply(Math,Object(p.a)(e.map((function(e){return e.x}))))+t,a=Math.min.apply(Math,Object(p.a)(e.map((function(e){return e.x}))))+t,r=Math.max.apply(Math,Object(p.a)(e.map((function(e){return e.y}))))+t,o=Math.min.apply(Math,Object(p.a)(e.map((function(e){return e.y}))))+t,i=Math.max.apply(Math,Object(p.a)(e.map((function(e){return e.z}))))+t,c=Math.min.apply(Math,Object(p.a)(e.map((function(e){return e.z}))))+t,u="\n                varying vec3 pos;\n    \n                void main() {\n                gl_FragColor = vec4((0.2 + 0.8*(pos.x-(".concat(a,"))/((").concat(n,")-(").concat(a,"))),\n                                    (0.2 + 0.8*(pos.y-(").concat(o,"))/((").concat(r,")-(").concat(o,"))),\n                                    (0.2 + 0.8*(pos.z-(").concat(c,"))/((").concat(i,")-(").concat(c,"))),\n                                    1.0).rgba;\n                }\n                ");return new m.m({vertexShader:"\n                varying vec3 pos;\n    \n                void main() {\n                pos = position;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                }\n                ",fragmentShader:u,uniforms:{}})}return new m.e}},{key:"updateScene",value:function(){var e=this.myScene.getObjectByName("Lines");this.myScene.remove(e),this.myScene.add(this.createGeometry(this.generatePoints()))}},{key:"componentDidMount",value:function(){this.myScene=this.createCanvas(),this.myRef.current.appendChild(this.canvas)}},{key:"componentDidUpdate",value:function(){this.updateScene(this.myScene)}},{key:"render",value:function(){return r.a.createElement("div",{id:"canvas-container",ref:this.myRef})}}]),n}(r.a.Component),w=(n(31),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.config,t=Math.max(0,1-Math.log10(e.step)),n=new Intl.NumberFormat("es-GB",{minimumFractionDigits:t}).format(this.props.val);return r.a.createElement("div",{className:"slider-container"},r.a.createElement("label",{htmlFor:e.name},e.name),r.a.createElement("input",{type:"range",name:e.name,id:e.name,min:e.min,max:e.max,step:e.step,value:this.props.val,onChange:e.onChange}),r.a.createElement("span",{className:"slider-value"},n))}}]),n}(r.a.Component)),b=n(2),y=n.n(b),g=n(13),O=n(3),k=n(17),j=n(18),M=n(14),C=n(22),E=new O.c.Socket("Number value"),x=new O.c.Socket("Vector value"),N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e,a,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;Object(u.a)(this,n),(o=t.call(this,a)).emitter=e,o.key=a,o.component=n.component,o.step=c;var s=r.data[a]||1;return r.data[a]=s,o.props={readonly:i,value:s,onChange:function(e){o.setValue(e),o.emitter.trigger("process")}},o}return Object(s.a)(n,[{key:"setValue",value:function(e){this.props.value=e,this.putData(this.key,e),this.update()}}]),n}(O.c.Control);N.component=function(e){var t=e.value,n=e.onChange;return r.a.createElement("div",{className:""},r.a.createElement("input",{type:"number",value:t,step:N.step,ref:function(e){e&&e.addEventListener("pointerdown",(function(e){return e.stopPropagation()}))},onChange:function(e){return n(+e.target.value)}}))};var I=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e,a,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(u.a)(this,n),(o=t.call(this,a)).emitter=e,o.key=a,o.component=n.component;var c=r.data[a]||"5*i";return r.data[a]=c,o.props={color:"black",readonly:i,value:c,onChange:function(e){o.setValue(e),o.emitter.trigger("process")}},o}return Object(s.a)(n,[{key:"setValue",value:function(e){this.props.value=e,this.putData(this.key,e),this.update()}},{key:"setColor",value:function(e){this.props.color=e,this.update()}}]),n}(O.c.Control);I.component=function(e){var t=e.value,n=e.onChange,a=e.color;return r.a.createElement("div",{className:""},r.a.createElement("input",{style:{color:a},type:"text",value:t,ref:function(e){e&&e.addEventListener("pointerdown",(function(e){return e.stopPropagation()}))},onChange:function(e){return n(e.target.value)}}))};var z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,"Output")).handler=e,a}return Object(s.a)(n,[{key:"builder",value:function(e){var t=new O.c.Input("v3","Vector",x);return e.addInput(t)}},{key:"worker",value:function(e,t,n){var a=t.v3[0];this.handler(a)}}]),n}(O.c.Component),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"Sphere")}return Object(s.a)(n,[{key:"builder",value:function(e){var t=new O.c.Output("v3","Vector",x),n=new O.c.Input("rad","Radius",E),a=new O.c.Input("k","K",E);return n.addControl(new N(this.editor,"rad",e)),a.addControl(new N(this.editor,"k",e)),e.addOutput(t).addInput(n).addInput(a)}},{key:"worker",value:function(e,t,n){var a=t.rad.length?t.rad[0]:e.data.rad,r=t.k.length?t.k[0]:e.data.k,o={x:function(e){return a*Math.sin(r*e)*Math.cos(e)},y:function(e){return a*Math.sin(r*e)*Math.sin(e)},z:function(e){return a*Math.cos(r*e)}};n.v3=o}}]),n}(O.c.Component),R=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"Cube")}return Object(s.a)(n,[{key:"builder",value:function(e){var t=new O.c.Output("v3","Vector",x),n=new O.c.Input("rad","Radius",E),a=new O.c.Input("k","K",E);return n.addControl(new N(this.editor,"rad",e)),a.addControl(new N(this.editor,"k",e)),e.addOutput(t).addInput(n).addInput(a)}},{key:"worker",value:function(e,t,n){var a=t.rad.length?t.rad[0]:e.data.rad,r=t.k.length?t.k[0]:e.data.k,o={x:function(e){return a*Math.sin(e)*Math.cos(r*e)/Math.pow(Math.pow(Math.sin(e),6)*(Math.pow(Math.sin(r*e),6)+Math.pow(Math.cos(r*e),6))+Math.pow(Math.cos(e),6),1/6)},y:function(e){return a*Math.sin(e)*Math.sin(r*e)/Math.pow(Math.pow(Math.sin(e),6)*(Math.pow(Math.sin(r*e),6)+Math.pow(Math.cos(r*e),6))+Math.pow(Math.cos(e),6),1/6)},z:function(e){return a*Math.cos(e)/Math.pow(Math.pow(Math.sin(e),6)*(Math.pow(Math.sin(r*e),6)+Math.pow(Math.cos(r*e),6))+Math.pow(Math.cos(e),6),1/6)}};n.v3=o}}]),n}(O.c.Component),F=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"Custom")}return Object(s.a)(n,[{key:"builder",value:function(e){var t=new O.c.Output("v3","Vector",x);return this.controls={fx:new I(this.editor,"fx",e),fy:new I(this.editor,"fy",e),fz:new I(this.editor,"fz",e)},e.addControl(this.controls.fx).addControl(this.controls.fy).addControl(this.controls.fz).addOutput(t)}},{key:"worker",value:function(e,t,n){var a,r,o;this.controls.fx.setColor("black"),this.controls.fy.setColor("black"),this.controls.fz.setColor("black");try{if(a=new Function("i","return "+e.data.fx),r=new Function("i","return "+e.data.fy),o=new Function("i","return "+e.data.fz),isNaN(a(.5)))throw new Error("fx error");if(isNaN(r(.5)))throw new Error("fy error");if(isNaN(o(.5)))throw new Error("fz error")}catch(c){a=function(e){return 0},r=function(e){return 0},o=function(e){return 0},this.controls.fx.setColor("red"),this.controls.fy.setColor("red"),this.controls.fz.setColor("red")}var i={x:a,y:r,z:o};n.v3=i}}]),n}(O.c.Component),V=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"Number")}return Object(s.a)(n,[{key:"builder",value:function(e){var t=new O.c.Output("num","Number",E),n=new N(this.editor,"num",e);return e.addControl(n).addOutput(t)}},{key:"worker",value:function(e,t,n){n.num=e.data.num}}]),n}(O.c.Component),A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"Add")}return Object(s.a)(n,[{key:"builder",value:function(e){var t=new O.c.Input("num1","Number",E),n=new O.c.Input("num2","Number2",E),a=new O.c.Output("num","Number",E);return t.addControl(new N(this.editor,"num1",e)),n.addControl(new N(this.editor,"num2",e)),e.addInput(t).addInput(n).addControl(new N(this.editor,"preview",e,!0)).addOutput(a)}},{key:"worker",value:function(e,t,n){var a=(t.num1.length?t.num1[0]:e.data.num1)+(t.num2.length?t.num2[0]:e.data.num2);this.editor.nodes.find((function(t){return t.id===e.id})).controls.get("preview").setValue(a),n.num=a}}]),n}(O.c.Component),H=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this,"Animate")).intervalId=null,e.progress=0,e.TIMER_INTERVAL=50,e}return Object(s.a)(n,[{key:"builder",value:function(e){var t=new O.c.Input("min","Min",E),n=new O.c.Input("max","Max",E),a=new O.c.Output("num","Number",E);return t.addControl(new N(this.editor,"min",e)),n.addControl(new N(this.editor,"max",e)),e.addInput(t).addInput(n).addControl(new N(this.editor,"preview",e,!0)).addOutput(a)}},{key:"worker",value:function(e,t,n){this.min=t.min.length?t.min[0]:e.data.min,this.max=t.max.length?t.max[0]:e.data.max;var a=Math.sin(this.progress)/2+.5,r=this.min+a*(this.max-this.min);this.num=Math.round(1e5*r)/1e5;this.cb=function(){this.progress+=.005,this.editor.trigger("process")}.bind(this),this.intervalId||(this.intervalId=setInterval(this.cb,this.TIMER_INTERVAL)),this.editor.nodes.find((function(t){return t.id===e.id})).controls.get("preview").setValue(this.num),n.num=this.num}}]),n}(O.c.Component),P=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.call(this,"Add Functions")}return Object(s.a)(n,[{key:"builder",value:function(e){var t=new O.c.Input("f1","F1",x),n=new O.c.Input("f2","F2",x),a=new O.c.Output("out","Result",x);return e.addInput(t).addInput(n).addOutput(a)}},{key:"worker",value:function(e,t,n){var a,r=t.f1.length?t.f1[0]:e.data.f1,o=t.f2.length?t.f2[0]:e.data.f2;r&&!o&&(a=r),o&&!r&&(a=o),r&&o&&(a={x:function(e){return r.x(e)+o.x(e)},y:function(e){return r.y(e)+o.y(e)},z:function(e){return r.z(e)+o.z(e)}}),n.out=a}}]),n}(O.c.Component);function L(){return(L=Object(g.a)(y.a.mark((function e(t,n){var a,r,o,i,c,u,s,l,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[new V,new A,new z(n),new S,new R,new P,new F,new H],(r=new O.c.NodeEditor("demo@0.1.0",t)).use(k.a),r.use(j.a),r.use(M.a),r.use(C.a,{searchBar:!1,delay:100}),o=new O.c.Engine("demo@0.1.0"),a.map((function(e){return r.register(e),o.register(e),null})),e.next=10,a[2].createNode();case 10:return i=e.sent,e.next=13,a[3].createNode({rad:50,k:3.7});case 13:return c=e.sent,e.next=16,a[4].createNode({rad:10,k:7.2});case 16:return u=e.sent,e.next=19,a[5].createNode();case 19:return s=e.sent,e.next=22,a[6].createNode({fx:"0",fy:"0",fz:"i"});case 22:return l=e.sent,e.next=25,a[7].createNode({min:1,max:4});case 25:d=e.sent,i.position=[600,0],c.position=[20,0],u.position=[600,200],s.position=[300,100],l.position=[20,200],d.position=[-250,100],r.addNode(i),r.addNode(c),r.addNode(u),r.addNode(s),r.addNode(l),r.addNode(d),r.connect(c.outputs.get("v3"),s.inputs.get("f1")),r.connect(d.outputs.get("num"),c.inputs.get("k")),r.connect(l.outputs.get("v3"),s.inputs.get("f2")),r.connect(s.outputs.get("out"),i.inputs.get("v3")),r.on("process nodecreated noderemoved connectioncreated connectionremoved",Object(g.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.abort();case 2:return e.next=4,o.process(r.toJSON());case 4:case"end":return e.stop()}}),e)})))),r.on("noderemove",(function(e){"Animate"===e.name&&clearInterval(e.intervalId)})),r.trigger("process"),r.view.resize(),M.a.zoomAt(r,r.nodes);case 47:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(36);var D=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).myRef=r.a.createRef(),e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.editor=function(e,t){return L.apply(this,arguments)}(this.myRef.current,this.props.handleOutput)}},{key:"render",value:function(){return r.a.createElement("div",{id:"nodes",style:{},ref:this.myRef})}}]),n}(r.a.Component),G=(n(37),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"help-container",onClick:this.props.close},r.a.createElement("h1",null,"Spiro v0.1"),r.a.createElement("p",null,"This demo app was created by Juan Manuel Scasso"),r.a.createElement("h2",null,"Usage tips"),r.a.createElement("ul",null,r.a.createElement("li",null,"Right click on the node area to add nodes"),r.a.createElement("li",null,"Right click on a node to delete or clone"),r.a.createElement("li",null,"Zoom, pan and rotate the 3D image with the mouse wheel and buttons"),r.a.createElement("li",null,"Zoom and pan the node editor in a similar way"),r.a.createElement("li",null,"In case of bad performance decrease the number of points and increment delta (if you want to cover more range)"),r.a.createElement("li",null,"Custom functions must use 'i' as parameter, and you can input standard Math.*"),r.a.createElement("li",null,"This is just a technical demo, it may contain catastrophic bugs")),r.a.createElement("h2",null,"Libraries"),r.a.createElement("ul",null,r.a.createElement("li",null,"THREE.js"),r.a.createElement("li",null,"Rete.js"),r.a.createElement("li",null,"React")),r.a.createElement("p",null,"I'm looking for work as Full Stack or Android developer, if interested hit me up at jmscasso (gmail) "))}}]),n}(r.a.Component)),B=n(21),T=n.n(B),J=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={k2:2.4,r1:30,nops:2e3,delta:.005,output:null,showHelp:!1},e.handleChange=e.handleChange.bind(Object(l.a)(e)),e.handleOutput=e.handleOutput.bind(Object(l.a)(e)),e.toggleHelp=e.toggleHelp.bind(Object(l.a)(e)),e.sliders=[{name:"nops",min:0,max:5e3,step:20,onChange:e.handleChange},{name:"delta",min:.005,max:1,step:.005,onChange:e.handleChange}],e}return Object(s.a)(n,[{key:"toggleHelp",value:function(){this.setState((function(e){return{showHelp:!e.showHelp}})),console.log(this.state.showHelp)}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;this.setState((function(e){return Object(c.a)({},t,n)}))}},{key:"handleOutput",value:function(e){this.setState({output:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("form",{action:""},this.sliders.map((function(t,n){return r.a.createElement(w,{val:e.state[t.name],config:t,key:n})})))),r.a.createElement("div",{className:"main"},r.a.createElement(v,{k0:this.state.k0,k1:this.state.k1,k2:this.state.k2,r1:this.state.r1,r2:this.state.r2,delta:this.state.delta,nops:this.state.nops,output:this.state.output}),r.a.createElement("div",{id:"nodes-container"},r.a.createElement(D,{handleOutput:this.handleOutput}))),r.a.createElement("div",{className:"help-icon"},r.a.createElement("img",{src:T.a,alt:"",onClick:this.toggleHelp})),this.state.showHelp?r.a.createElement(G,{close:this.toggleHelp}):null)}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.83ac6ed4.chunk.js.map